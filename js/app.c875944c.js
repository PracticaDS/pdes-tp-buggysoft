(function(e){function t(t){for(var i,o,c=t[0],s=t[1],l=t[2],m=0,p=[];m<c.length;m++)o=c[m],a[o]&&p.push(a[o][0]),a[o]=0;for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i]);u&&u(t);while(p.length)p.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],i=!0,c=1;c<n.length;c++){var s=n[c];0!==a[s]&&(i=!1)}i&&(r.splice(t--,1),e=o(o.s=n[0]))}return e}var i={},a={app:0},r=[];function o(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=i,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/pdes-tp-buggysoft/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=s;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0a0c":function(e,t,n){},"109c":function(e,t,n){},"113f":function(e,t,n){},"21bb":function(e,t,n){"use strict";var i=n("bcc9"),a=n.n(i);a.a},2221:function(e,t,n){"use strict";var i=n("a710"),a=n.n(i);a.a},"301f":function(e,t,n){"use strict";var i=n("d423"),a=n.n(i);a.a},3815:function(e,t,n){"use strict";var i=n("113f"),a=n.n(i);a.a},4634:function(e,t,n){},"506e":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);var i={};n.r(i),n.d(i,"Machine",function(){return he}),n.d(i,"Starter",function(){return _e}),n.d(i,"Furnace",function(){return xe}),n.d(i,"Transporter",function(){return Se}),n.d(i,"Seller",function(){return it}),n.d(i,"Crafter",function(){return Xe});n("cadf"),n("551c"),n("f751"),n("097d");var a=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},o=[],c=(n("5c0b"),n("2877")),s={},l=Object(c["a"])(s,r,o,!1,null,null,null),u=l.exports,m=n("8c4f"),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("UserLogin",{attrs:{loginCallback:e.login}})],1)},f=[],d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"title"},[e._v("\n    Welcome to the industrial revolution!\n  ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{placeholder:"Name"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),n("button",{attrs:{type:"button",disabled:!e.isValidUsername},on:{click:e.login}},[e._v("\n    Login\n  ")])])},h=[],b={name:"game",data:function(){return{username:""}},props:{loginCallback:Function},methods:{login:function(){this.loginCallback(this.username)}},computed:{isValidUsername:function(){return""!==this.username}}},v=b,g=(n("f06c"),Object(c["a"])(v,d,h,!1,null,"5e5be7f8",null)),C=g.exports,y={name:"game",components:{UserLogin:C},methods:{login:function(e){this.$store.dispatch("loginUser",e)}}},_=y,O=(n("21bb"),Object(c["a"])(_,p,f,!1,null,null,null)),k=O.exports,j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"game p1"},[n("div",{staticClass:"p1"},[n("span",{staticClass:"text-primary"},[e._v("Ganancias ")]),n("span",{staticClass:"label"},[e._v("$"+e._s(Number(e.earnings).toFixed(2)))])]),n("div",{staticClass:"flex"},[n("ToolBox"),n("Factory",{attrs:{rows:e.rows}}),n("Details",{attrs:{currentMachine:e.currentMachine}})],1),e._m(0)])},w=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("footer",[i("p",{staticClass:"text-small subtle"},[e._v("A game developed by")]),i("img",{staticClass:"hover",attrs:{height:"200px",alt:"Buggysoft logo",src:n("b35e")}})])}],M=n("2f62"),x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"details toolbar"},[n("p",{staticClass:"text-primary hp1"},[e._v("Detalles")]),e.currentMachine.name?n("div",{staticClass:"section text-small"},[n("div",{staticClass:"label"},[e._v(e._s(e.currentMachine.name))]),n("p",[e._v("Costo: "),n("span",{staticClass:"text-accent"},[e._v("$"+e._s(e.currentMachine.cost))])]),n("p",[e._v("Frecuencia: "),n("span",{staticClass:"text-accent"},[e._v(e._s(e.currentMachine.speed)+"/s")])])]):n("div",{staticClass:"section text-small"},[n("i",[e._v("Seleccione una maquina")])])])},A=[],R={name:"Details",props:{currentMachine:Object}},T=R,E=(n("fd4f"),Object(c["a"])(T,x,A,!1,null,null,null)),q=E.exports,S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Factory",{attrs:{rows:e.rows,tickDelay:e.tickDelay,running:e.running}})},$=[],N=n("cebc"),U=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"grid"},e._l(e.rows,function(e,t){return n("Row",{key:t,attrs:{number:t,columns:e}})}),1)},B=[],I=(n("ac6a"),n("c5f6"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row"},e._l(e.columns,function(t,i){return n("Cell",{key:i,attrs:{position:[e.number,i]}})}),1)}),P=[],F=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Cell",{attrs:{position:e.position,content:e.content,action:e.action,resourceCell:e.resourceCell,debug:e.debug},on:{applyActionToCell:e.applyActionToCell,stopAnimation:function(t){return e.stopAnimation(e.position)}}})},D=[],W=n("768b"),L=n("d225"),G=n("b0b4"),H=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(L["a"])(this,e),this.position=t,this.machine=n}return Object(G["a"])(e,[{key:"tick",value:function(e,t){this.machine.tick(e,t)}}],[{key:"getNextCell",value:function(e,t){var n={up:function(e){var t=Object(W["a"])(e,2),n=t[0],i=t[1];return[Math.max(n-1,0),i]},down:function(e){var t=Object(W["a"])(e,2),n=t[0],i=t[1];return[n+1,i]},left:function(e){var t=Object(W["a"])(e,2),n=t[0],i=t[1];return[n,Math.max(i-1,0)]},right:function(e){var t=Object(W["a"])(e,2),n=t[0],i=t[1];return[n,i+1]}};return n[t](e)}}]),e}(),J=H,V=n("db0c"),z=n.n(V),K=n("a4bb"),Q=n.n(K),X=(n("7f7f"),{gold:{name:"Oro",material:"gold"},copper:{name:"Cobre",material:"copper"},aluminum:{name:"Aluminio",material:"aluminum"},carbon:{name:"Carbon",material:"carbon"},iron:{name:"Hierro",material:"iron"},copperWire:{name:"Cable de Cobre",material:"copper_wire"},gear:{name:"Engranaje",material:"gear"},circuit:{name:"Circuito",material:"circuit"},processed_iron:{name:"Hierro procesado",material:"processed_iron"},processed_gold:{name:"Oro procesado",material:"processed_gold"},processed_carbon:{name:"Carbon procesado",material:"processed_carbon"},processed_copper:{name:"Cobre procesado",material:"processed_copper"},processed_aluminum:{name:"Aluminio procesado",material:"processed_aluminum"},processingUnit:{name:"Unidad de procesamiento",material:"processing_unit"},robot:{name:"Robot",material:"robot"}}),Y=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;Object(L["a"])(this,e),this.name=t.name,this.icon=t.icon,this.orientation=t.orientation,this.tick=t.tick||n,this.cost=t.cost,this.speed=t.speed,this.animated=t.animated,this.position=t.position,this.ticking=!1};function Z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={cost:100,speed:1,icon:"in.png",orientation:"down"};function n(e,t){if(this.ticking=!1,console.log("Tick Starter"),this.material){var n=Object(W["a"])(this.position,2),i=n[0],a=n[1],r=e[i][a];if(r.resources[this.material]>0){var o=J.getNextCell(this.position,this.orientation);t.addResourcesInCell(o,[{material:this.material,quantity:1}]),t.consumeResourcesInCell(this.position,[{material:this.material,quantity:1}])}else this.ticking=!0,t.addResourcesInCell(this.position,[{material:this.material,quantity:1}])}else console.log("No material selected")}var i=new Y(Object(N["a"])({},t,e),n);return i.material=e.material,i}function ee(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={cost:75,speed:1,icon:"seller.png",orientation:"down"};function n(e,t){console.log("Tick Seller"),this.ticking=!1;var n=Object(W["a"])(this.position,2),i=n[0],a=n[1],r=e[i][a];if(!r.isEmpty()){this.ticking=!0;var o=r.resources,c=Q()(o).map(function(e){return{material:e,quantity:o[e]}});t.sellResources(c),t.consumeResourcesInCell(this.position,c)}}return new Y(Object(N["a"])({},t,e),n)}function te(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={cost:100,speed:1,icon:"transporter.png",orientation:"down"};function n(e,t){console.log("Tick Transporter"),this.ticking=!1;var n=Object(W["a"])(this.position,2),i=n[0],a=n[1],r=e[i][a];if(console.log(r),!r.isEmpty()){this.ticking=!0;var o=J.getNextCell(this.position,this.orientation),c=[];Q()(r.resources).forEach(function(e){c.push({material:e,quantity:r.resources[e]})}),t.addResourcesInCell(o,c),t.consumeResourcesInCell(this.position,c)}}return new Y(Object(N["a"])({},t,e),n)}function ne(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={cost:200,speed:1,icon:"crafter.png",orientation:"down"};function n(e,t){console.log("Tick Crafter"),this.ticking=!1;var n=Object(W["a"])(this.position,2),i=n[0],a=n[1],r=e[i][a];if(this.blueprint.name&&r.hasMaterials(this.blueprint.craftedResource)){var o=J.getNextCell(this.position,this.orientation);t.addResourcesInCell(o,this.blueprint.craftedResource),t.consumeResourcesInCell(this.position,this.blueprint.craftedResource)}else this.blueprint.name&&r.hasMaterials(this.blueprint.resources)?(this.ticking=!0,t.addResourcesInCell(this.position,this.blueprint.craftedResource),t.consumeResourcesInCell(this.position,this.blueprint.resources)):console.log("No blueprint selected/No materials to craft")}var i=new Y(Object(N["a"])({},t,e),n);return i.blueprint=e.blueprint||{},i}function ie(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={cost:100,speed:1,icon:"furnace.png",orientation:"down"};function n(e,t){console.log("Tick Furnace"),this.ticking=!1;var n=Object(W["a"])(this.position,2),i=n[0],a=n[1],r=e[i][a];if(r.hasProcessedMaterials()){var o,c=J.getNextCell(this.position,this.orientation);z()(this.transformations).forEach(function(e){r.resources[e]>0&&(o=e)}),t.addResourcesInCell(c,[{material:o,quantity:1}]),t.consumeResourcesInCell(this.position,[{material:o,quantity:1}])}else if(r.hasRawMaterials()){var s;this.ticking=!0,Q()(this.transformations).forEach(function(e){r.resources[e]>0&&(s=e)}),t.addResourcesInCell(this.position,[{material:this.transformations[s],quantity:1}]),t.consumeResourcesInCell(this.position,[{material:s,quantity:1}])}else console.log("No materials to process")}var i=new Y(Object(N["a"])({},t,e),n);return i.transformations={gold:X.processed_gold.material,copper:X.processed_copper.material,aluminum:X.processed_aluminum.material,carbon:X.processed_carbon.material,iron:X.processed_iron.material},i}var ae={Starter:Z,Seller:ee,Transporter:te,Crafter:ne,Furnace:ie};function re(e){return ae[e.name](e)}n("6762"),n("2fdb");var oe=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{gold:0,copper:0,aluminum:0,carbon:0,iron:0};Object(L["a"])(this,e),this.position=t,this.resources=n}return Object(G["a"])(e,[{key:"addResources",value:function(t){var n=e.copyResources(this.resources);return Q()(t).forEach(function(e){n[e]?n[e]+=t[e]:n[e]=t[e]}),new e(this.position,n)}},{key:"consumeResources",value:function(t){var n=e.copyResources(this.resources);return Q()(t).forEach(function(e){n[e]>=t[e]?n[e]-=t[e]:console.log("Not enough ".concat(e))}),new e(this.position,n)}},{key:"copy",value:function(){var t=e.copyResources(this.resources);return new e(this.position,t)}},{key:"isEqualTo",value:function(e){return this.resources===e.resources}},{key:"hasRawMaterials",value:function(){return!(0===this.resources.gold&&0===this.resources.copper&&0===this.resources.aluminum&&0===this.resources.carbon&&0===this.resources.iron)}},{key:"hasProcessedMaterials",value:function(){var e=this;return Q()(this.resources).some(function(t){return t.includes("processed_")&&e.resources[t]>0})}},{key:"isEmpty",value:function(){return!z()(this.resources).some(function(e){return e>0})}},{key:"hasMaterials",value:function(e){var t=this;return e.every(function(e){var n=e.material,i=e.quantity;return t.resources[n]>=i})}}],[{key:"copyResources",value:function(e){return Object(N["a"])({gold:e.gold,copper:e.copper,aluminum:e.aluminum,carbon:e.carbon,iron:e.iron},e)}}]),e}(),ce=oe,se=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"cell",on:{click:e.applyActionToCell}},[n("transition",{attrs:{name:"fade"}},[e.content.machine.name?n("div",{staticClass:"machine-container"},[n(e.content.machine.name,{tag:"component",attrs:{machine:e.content.machine,action:e.action},on:{stopAnimation:function(t){return e.$emit("stopAnimation")}}})],1):e._e()]),e.debug?n("div",{staticClass:"resource-display"},e._l(e.resourceCell.resources,function(t,i){return n("div",{key:i},[t>0?n("span",[n("span",{class:["material",i],attrs:{title:i}}),e._v(" "+e._s(t)+"\n      ")]):e._e()])}),0):e._e()],1)},le=[],ue=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("img",{class:["machine",e.orientation,e.animated?"animated":""],attrs:{src:e.iconUrl,alt:""}})},me=[],pe={name:"Machine",props:{action:String,machine:{type:Object,default:function(){return{}}}},data:function(){return{publicPath:"/pdes-tp-buggysoft/"}},computed:{iconUrl:function(){return"".concat(this.publicPath,"machines/").concat(this.machine.icon)},tickIconUrl:function(){return"".concat(this.publicPath,"machines/tick-").concat(this.machine.icon)},orientation:function(){return this.machine.orientation},animated:function(){return this.machine.animated}},watch:{machine:function(e){var t=this;e.animated&&setTimeout(function(){t.$emit("stopAnimation")},225)}}},fe=pe,de=(n("d9a3"),Object(c["a"])(fe,ue,me,!1,null,null,null)),he=de.exports,be=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"options-container"},[e.machine.ticking?n("img",{class:["machine",e.orientation,e.animated?"animated":""],attrs:{src:e.tickIconUrl,alt:""},on:{click:e.toggleSelected}}):n("img",{class:["machine",e.orientation,e.animated?"animated":""],attrs:{src:e.iconUrl,alt:""},on:{click:e.toggleSelected}}),e.selected?n("div",{staticClass:"options-panel"},e._l(e.materials,function(t){var i=t.materialName,a=t.material;return n("p",{key:a,on:{click:function(t){return e.selectMaterial(a)}}},[n("span",{class:["material",a]}),e._v(" "+e._s(i)+"\n    ")])}),0):e._e()])},ve=[],ge={name:"Starter",mixins:[he],data:function(){return{selected:!1,materials:[{materialName:X.gold.name,material:X.gold.material},{materialName:X.copper.name,material:X.copper.material},{materialName:X.aluminum.name,material:X.aluminum.material},{materialName:X.carbon.name,material:X.carbon.material},{materialName:X.iron.name,material:X.iron.material}]}},methods:{toggleSelected:function(){"select"===this.action&&(this.selected=!this.selected)},selectMaterial:function(e){this.selected=!1,this.machine.material=e}}},Ce=ge,ye=(n("80b7"),Object(c["a"])(Ce,be,ve,!1,null,null,null)),_e=ye.exports,Oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"options-container"},[e.machine.ticking?n("img",{class:["machine",e.orientation,e.animated?"animated":""],attrs:{src:e.tickIconUrl,alt:""}}):n("img",{class:["machine",e.orientation,e.animated?"animated":""],attrs:{src:e.iconUrl,alt:""}})])},ke=[],je={name:"Furnace",mixins:[he]},we=je,Me=Object(c["a"])(we,Oe,ke,!1,null,null,null),xe=Me.exports,Ae=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"options-container"},[n("img",{class:["machine",e.orientation,e.animated?"animated":""],attrs:{src:e.iconUrl,alt:""}}),e.machine.ticking?n("span",{class:["resourceball",e.orientation]}):e._e()])},Re=[],Te={name:"Transporter",mixins:[he]},Ee=Te,qe=(n("301f"),Object(c["a"])(Ee,Ae,Re,!1,null,"10a77a4f",null)),Se=qe.exports,$e=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Crafter",{attrs:{action:e.action,machine:e.machine,blueprints:e.blueprints}})},Ne=[],Ue=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"options-container"},[e.machine.ticking?n("img",{class:["machine",e.orientation,e.animated?"animated":""],attrs:{src:e.tickIconUrl,alt:""},on:{click:e.toggleSelected}}):n("img",{class:["machine",e.orientation,e.animated?"animated":""],attrs:{src:e.iconUrl,alt:""},on:{click:e.toggleSelected}}),e.selected?n("div",{staticClass:"options-panel for-blueprint"},[n("h2",[e._v("Planos")]),e._l(e.blueprints,function(t){return n("Blueprint",{key:t.name,attrs:{blueprint:t,selected:e.machine.blueprint.name===t.name},on:{click:function(n){return e.selectBlueprint(t)}}})})],2):e._e()])},Be=[],Ie=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:["blueprint",e.selected?"selected":""],on:{click:function(t){return e.$emit("click")}}},[n("h4",{class:["label",e.selected?"selected":""]},[e._v(e._s(e.blueprint.name))]),e._l(e.blueprint.resources,function(t){return n("div",{key:t.material,staticClass:"resource"},[n("span",{class:["material",t.material]}),e._v(" "+e._s(t.materialName)+"\n    "),n("span",{staticClass:"qty"},[e._v(" x"+e._s(t.quantity))])])}),n("p",{staticClass:"profit"},[e._v("\n    Ganancia "),n("span",{staticClass:"money"},[e._v("$"+e._s(Number(e.blueprint.profit).toFixed(2)))])])],2)},Pe=[],Fe={name:"Blueprint",props:{blueprint:Object,selected:Boolean}},De=Fe,We=(n("bb54"),Object(c["a"])(De,Ie,Pe,!1,null,null,null)),Le=We.exports,Ge={name:"Crafter",mixins:[he],components:{Blueprint:Le},props:{blueprints:Array},data:function(){return{selected:!1}},methods:{toggleSelected:function(){"select"===this.action&&(this.selected=!this.selected)},selectBlueprint:function(e){this.selected=!1,this.machine.blueprint=e}}},He=Ge,Je=(n("807f"),Object(c["a"])(He,Ue,Be,!1,null,null,null)),Ve=Je.exports,ze={name:"CrafterWrapper",components:{Crafter:Ve},props:{action:String,machine:Object},computed:Object(N["a"])({},Object(M["d"])(["blueprints"]))},Ke=ze,Qe=Object(c["a"])(Ke,$e,Ne,!1,null,"0bbbcd2e",null),Xe=Qe.exports,Ye=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"options-container"},[e.machine.ticking?n("img",{class:["machine",e.orientation,e.animated?"animated":""],attrs:{src:e.tickIconUrl,alt:""}}):n("img",{class:["machine",e.orientation,e.animated?"animated":""],attrs:{src:e.iconUrl,alt:""}})])},Ze=[],et={name:"Seller",mixins:[he]},tt=et,nt=Object(c["a"])(tt,Ye,Ze,!1,null,null,null),it=nt.exports,at={name:"Cell",components:Object(N["a"])({},i),props:{content:Object,position:Array,action:String,resourceCell:Object,debug:Boolean},computed:{machineComponent:function(){return this.content.machine.name||"Machine"}},methods:{applyActionToCell:function(){this.$emit("applyActionToCell",this.position)}}},rt=at,ot=(n("7ea3"),Object(c["a"])(rt,se,le,!1,null,null,null)),ct=ot.exports,st={name:"Cell-Wrapper",components:{Cell:ct},props:{position:Array},computed:Object(N["a"])({},Object(M["d"])(["rows","resources","action","debug"]),{content:function(){var e=Object(W["a"])(this.position,2),t=e[0],n=e[1];return this.rows[t][n]||new J},resourceCell:function(){var e=Object(W["a"])(this.position,2),t=e[0],n=e[1];return this.resources[t][n]||new ce}}),methods:Object(N["a"])({},Object(M["c"])(["setCurrentMachine","stopAnimation"]),Object(M["b"])(["applyActionToCell"]))},lt=st,ut=Object(c["a"])(lt,F,D,!1,null,"f0404ed6",null),mt=ut.exports,pt={name:"Row",components:{Cell:mt},props:{number:Number,columns:Array}},ft=pt,dt=(n("b2f8"),Object(c["a"])(ft,I,P,!1,null,"78977fff",null)),ht=dt.exports,bt={name:"Factory",components:{Row:ht},props:{rows:Array,rowsToCommit:Array,tickDelay:Number,running:Boolean},methods:Object(N["a"])({},Object(M["b"])(["tickCell","endTick"]),{gameLoop:function(){var e=this;console.log("Tick"),this.running&&(this.rows.forEach(function(t){t.forEach(function(t){t.machine.tick&&e.tickCell(t)})}),this.endTick()),setTimeout(this.gameLoop.bind(this),this.tickDelay)}}),mounted:function(){this.gameLoop()}},vt=bt,gt=(n("3815"),Object(c["a"])(vt,U,B,!1,null,"363781bb",null)),Ct=gt.exports,yt={name:"Factory-Wrapper",props:{rows:Array},components:{Factory:Ct},computed:Object(N["a"])({},Object(M["d"])(["tickDelay","running"]))},_t=yt,Ot=Object(c["a"])(_t,S,$,!1,null,"49f7b804",null),kt=Ot.exports,jt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"toolbar"},[n("p",{staticClass:"text-primary hp1"},[e._v("Maquinas")]),n("div",{staticClass:"section no-padding"},e._l(e.machines,function(t){return n("Button",{key:t.name,attrs:{type:t.name===e.currentMachine.name?"active":"",disabled:t.cost>e.earnings},on:{click:function(n){return e.pickMachineToPlace(t)}}},[n("Machine",{attrs:{machine:t}})],1)}),1),n("br"),n("p",{staticClass:"text-primary hp1"},[e._v("Edici√≥n")]),n("div",{staticClass:"section no-padding"},[n("ActionButton",{attrs:{action:"remove",active:"remove"===e.action},on:{click:function(t){return e.setAction("remove")}}}),n("ActionButton",{attrs:{action:"move",active:"move"===e.action},on:{click:function(t){return e.setAction("move")}}}),n("ActionButton",{attrs:{action:"rotate",active:"rotate"===e.action},on:{click:function(t){return e.setAction("rotate")}}})],1)])},wt=[],Mt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{class:[e.type,e.disabled?"disabled":"","square-button"],on:{click:e.handleClick}},[e._t("default")],2)},xt=[],At={name:"Button",props:{type:String,disabled:Boolean},methods:{handleClick:function(){this.disabled||this.$emit("click")}}},Rt=At,Tt=(n("ef55"),Object(c["a"])(Rt,Mt,xt,!1,null,null,null)),Et=Tt.exports,qt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Button",{attrs:{type:e.active?"active":""},on:{click:function(t){return e.$emit("click")}}},[n("img",{attrs:{src:e.publicPath+"actions/"+e.action+".png",alt:""}})])},St=[],$t={name:"ActionButton",components:{Button:Et},props:{action:String,active:Boolean},data:function(){return{publicPath:"/pdes-tp-buggysoft/"}}},Nt=$t,Ut=Object(c["a"])(Nt,qt,St,!1,null,"2082a286",null),Bt=Ut.exports,It={name:"ToolBox",components:{ActionButton:Bt,Button:Et,Machine:he},computed:Object(M["d"])(["currentMachine","machines","action","earnings"]),methods:Object(N["a"])({},Object(M["b"])(["setAction","pickMachineToPlace"]))},Pt=It,Ft=Object(c["a"])(Pt,jt,wt,!1,null,null,null),Dt=Ft.exports,Wt={name:"game",components:{Details:q,Factory:kt,ToolBox:Dt},computed:Object(M["d"])(["earnings","rows","machines","currentMachine"])},Lt=Wt,Gt=(n("2221"),Object(c["a"])(Lt,j,w,!1,null,null,null)),Ht=Gt.exports;a["a"].use(m["a"]);var Jt=new m["a"]({routes:[{path:"/",name:"home",component:k},{path:"/game",name:"game",component:Ht}]}),Vt={setCurrentMachine:function(e,t){e.currentMachine=t},clearCurrentMachine:function(e){e.currentMachine={}},setCellMachine:function(e,t){var n=Object(W["a"])(t,2),i=n[0],a=n[1];if("place"===e.action){var r=re(e.currentMachine);e.rows[i][a].machine=r,r.position=t}else e.rows[i][a].machine=e.currentMachine,e.currentMachine.position=t},setActionOriginCell:function(e,t){e.actionOriginCell=t},buyMachine:function(e,t){e.earnings-=t.cost},rotateMachineInCell:function(e,t){var n=t.cell,i=t.orientation,a=Object(W["a"])(n,2),r=a[0],o=a[1],c=e.rows[r][o].machine;e.rows[r][o].machine=re(Object(N["a"])({},c,{orientation:i,animated:!0}))},stopAnimation:function(e,t){var n=Object(W["a"])(t,2),i=n[0],a=n[1],r=e.rows[i][a].machine;e.rows[i][a].machine=re(Object(N["a"])({},r,{animated:!1}))},increaseEarnings:function(e,t){e.earnings+=t},setAction:function(e,t){e.action=t},startSimulation:function(e){e.running=!0},stopSimulation:function(e){e.running=!1},stageResourceAdding:function(e,t){var n=t.cell,i=t.updateToCell,r=Object(W["a"])(n,2),o=r[0],c=r[1],s=e.resourcesToCommit[o][c],l=s.addResources(i);a["a"].set(e.resourcesToCommit[o],c,l)},stageResourceConsumption:function(e,t){var n=t.cell,i=t.updateToCell,r=Object(W["a"])(n,2),o=r[0],c=r[1],s=e.resourcesToCommit[o][c],l=s.consumeResources(i);a["a"].set(e.resourcesToCommit[o],c,l)},commitResources:function(e){e.resourcesToCommit.forEach(function(t){t.forEach(function(t){var n=Object(W["a"])(t.position,2),i=n[0],r=n[1];t.isEqualTo(e.resources[i][r])||a["a"].set(e.resources[i],r,t)})})},clearStaging:function(e){e.resources.forEach(function(t){t.forEach(function(t){var n=Object(W["a"])(t.position,2),i=n[0],r=n[1];a["a"].set(e.resourcesToCommit[i],r,t.copy())})})},setCurrentUser:function(e,t){e.currentUser=t}},zt=n("bc3a"),Kt=n.n(zt),Qt=(n("7514"),n("75fc"));function Xt(e,t){return Object(Qt["a"])(Array(t).keys()).map(function(t){return new ce([e,t])})}function Yt(e,t){return Object(Qt["a"])(Array(t).keys()).map(function(t){return new J([e,t])})}function Zt(e,t,n){return Object(Qt["a"])(Array(e).keys()).map(function(e){return n(e,t)})}function en(e,t){return Zt(e,t,Yt)}function tn(e,t){return Zt(e,t,Xt)}function nn(e,t){var n=Object(W["a"])(e,2),i=n[0],a=n[1];return t.rows[i][a]}function an(e,t){return nn(e,t).machine}function rn(e){var t={};return e.forEach(function(e){var n=e.material,i=e.quantity;void 0!==t[n]?t[n]+=i:t[n]=i}),t}function on(e,t){var n=t.find(function(t){return t.material===e});return n.profit||0}function cn(e){var t=e.commit,n=e.dispatch;return{addResourcesInCell:function(e,n){var i=rn(n);t("stageResourceAdding",{cell:e,updateToCell:i})},consumeResourcesInCell:function(e,n){var i=rn(n);t("stageResourceConsumption",{cell:e,updateToCell:i})},sellResources:function(e){n("sellResources",{resources:e})}}}var sn=cn,ln={applyActionToCell:function(e,t){var n=e.commit,i=e.state;i.cellActions[i.action]({commit:n,state:i},t)},setAction:function(e,t){var n=e.commit;n("setAction",t),n("clearCurrentMachine")},pickMachineToPlace:function(e,t){var n=e.commit;n("setCurrentMachine",re(t)),n("setAction","place")},place:function(e,t){var n=e.commit,i=e.state,a=an(t,i);a.name?(n("setCurrentMachine",a),n("setAction","select")):i.currentMachine.cost<=i.earnings&&(n("buyMachine",i.currentMachine),n("setCellMachine",t))},select:function(e,t){var n=e.commit,i=e.state,a=an(t,i);n("setCurrentMachine",a)},remove:function(e,t){var n=e.commit,i=e.state,a=an(t,i);a.name&&(n("increaseEarnings",a.cost),n("clearCurrentMachine"),n("setCellMachine",t))},move:function(e,t){var n=e.commit,i=e.state,a=an(t,i);a.name&&!i.actionOriginCell?(n("setCurrentMachine",a),n("setActionOriginCell",t)):a.name?(n("setCurrentMachine",a),n("setAction","select"),n("setActionOriginCell",null)):i.actionOriginCell&&(n("setCellMachine",t),n("clearCurrentMachine"),n("setCellMachine",i.actionOriginCell),n("setActionOriginCell",null))},rotate:function(e,t){var n=e.commit,i=e.state,a=an(t,i);if(a.name){var r={up:"right",right:"down",down:"left",left:"up"},o=r[a.orientation];n("rotateMachineInCell",{cell:t,orientation:o})}else n("setAction","select")},tickCell:function(e,t){t.tick(e.state.resources,sn(e))},endTick:function(e){var t=e.commit;t("commitResources"),t("clearStaging")},sellResources:function(e,t){var n=e.commit,i=e.state,a=t.resources,r=a.filter(function(e){return e.quantity>0}),o=r.reduce(function(e,t){return e+on(t.material,i.materialProfits)*t.quantity},0);n("increaseEarnings",o)},loginUser:function(e,t){var n=e.commit;Kt.a.get("".concat("http://localhost:3030","/users/").concat(t)).then(function(e){n("setCurrentUser",e.data)}).catch(function(e){console.log(e)})}},un=12,mn=12,pn=ln.place,fn=ln.select,dn=ln.remove,hn=ln.move,bn=ln.rotate,vn=[re({name:"Starter"}),re({name:"Seller"}),re({name:"Crafter"}),re({name:"Transporter"}),re({name:"Furnace"})],gn=[{material:X.copper.material,profit:2},{material:X.iron.material,profit:1},{material:X.gold.material,profit:5},{material:X.carbon.material,profit:3},{material:X.aluminum.material,profit:2},{material:X.circuit.material,profit:30},{material:X.processingUnit.material,profit:100},{material:X.robot.material,profit:500},{material:X.copperWire.material,profit:10},{material:X.gear.material,profit:20},{material:X.processed_gold.material,profit:7},{material:X.processed_iron.material,profit:3},{material:X.processed_copper.material,profit:4},{material:X.processed_carbon.material,profit:5},{material:X.processed_aluminum.material,profit:4}],Cn=[{name:X.circuit.name,craftedResource:[{material:X.circuit.material,quantity:1}],profit:gn.find(function(e){return e.material===X.circuit.material}).profit,resources:[{material:X.copper.material,quantity:2,materialName:X.copper.name},{material:X.gold.material,quantity:1,materialName:X.gold.name}]},{name:X.copperWire.name,craftedResource:[{material:X.copperWire.material,quantity:1}],profit:gn.find(function(e){return e.material===X.copperWire.material}).profit,resources:[{material:X.copper.material,quantity:2,materialName:X.copper.name}]},{name:X.gear.name,craftedResource:[{material:X.gear.material,quantity:1}],profit:gn.find(function(e){return e.material===X.gear.material}).profit,resources:[{material:X.iron.material,quantity:1,materialName:X.iron.name}]},{name:X.processingUnit.name,craftedResource:[{material:X.processingUnit.material,quantity:1}],profit:gn.find(function(e){return e.material===X.processingUnit.material}).profit,resources:[{material:X.circuit.material,quantity:2,materialName:X.circuit.name},{material:X.processed_gold.material,quantity:1,materialName:X.processed_gold.name}]},{name:X.robot.name,craftedResource:[{material:X.robot.material,quantity:1}],profit:gn.find(function(e){return e.material===X.robot.material}).profit,resources:[{material:X.processed_iron.material,quantity:5,materialName:X.processed_iron.name},{material:X.processingUnit.material,quantity:5,materialName:X.processingUnit.name},{material:X.gear.material,quantity:5,materialName:X.gear.name}]}],yn={earnings:1e3,tickDelay:1e3,running:!0,currentMachine:{},action:"place",actionOriginCell:null,cellActions:{place:pn,remove:dn,move:hn,rotate:bn,select:fn},machines:vn,blueprints:Cn,materialProfits:gn,rows:en(un,mn),resources:tn(un,mn),resourcesToCommit:tn(un,mn),debug:!0,currentUser:null},_n={namespaced:!0,actions:{addResourceToCell:function(e,t){var n=e.rootState,i=t.resource,a=t.nextCell,r=Object(W["a"])(a,2),o=r[0],c=r[1],s=n.rowsToCommit[o][c];s.machine&&s.machine.name&&s.resources.push(i)}}},On={commit:_n};a["a"].use(M["a"]);var kn=new M["a"].Store({state:yn,mutations:Vt,actions:ln,modules:On});a["a"].config.productionTip=!1,new a["a"]({router:Jt,store:kn,render:function(e){return e(u)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";var i=n("5e27"),a=n.n(i);a.a},"5e27":function(e,t,n){},"63c6":function(e,t,n){},"7ea3":function(e,t,n){"use strict";var i=n("dd95"),a=n.n(i);a.a},"7fd4":function(e,t,n){},"807f":function(e,t,n){"use strict";var i=n("ee5f"),a=n.n(i);a.a},"80b7":function(e,t,n){"use strict";var i=n("506e"),a=n.n(i);a.a},a710:function(e,t,n){},b2f8:function(e,t,n){"use strict";var i=n("109c"),a=n.n(i);a.a},b35e:function(e,t,n){e.exports=n.p+"img/buggysoft-logo-w.7be831b4.png"},bb54:function(e,t,n){"use strict";var i=n("7fd4"),a=n.n(i);a.a},bcc9:function(e,t,n){},c76d:function(e,t,n){},d423:function(e,t,n){},d9a3:function(e,t,n){"use strict";var i=n("4634"),a=n.n(i);a.a},dd95:function(e,t,n){},ee5f:function(e,t,n){},ef55:function(e,t,n){"use strict";var i=n("c76d"),a=n.n(i);a.a},f06c:function(e,t,n){"use strict";var i=n("0a0c"),a=n.n(i);a.a},fd4f:function(e,t,n){"use strict";var i=n("63c6"),a=n.n(i);a.a}});
//# sourceMappingURL=app.c875944c.js.map