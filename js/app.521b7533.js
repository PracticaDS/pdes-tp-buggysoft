(function(t){function e(e){for(var i,o,c=e[0],s=e[1],l=e[2],m=0,p=[];m<c.length;m++)o=c[m],a[o]&&p.push(a[o][0]),a[o]=0;for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i]);u&&u(e);while(p.length)p.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],i=!0,c=1;c<n.length;c++){var s=n[c];0!==a[s]&&(i=!1)}i&&(r.splice(e--,1),t=o(o.s=n[0]))}return t}var i={},a={app:0},r=[];function o(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=i,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/pdes-tp-buggysoft/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var u=s;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"109c":function(t,e,n){},"113f":function(t,e,n){},"21bb":function(t,e,n){"use strict";var i=n("bcc9"),a=n.n(i);a.a},3815:function(t,e,n){"use strict";var i=n("113f"),a=n.n(i);a.a},4634:function(t,e,n){},"506e":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);var i={};n.r(i),n.d(i,"Machine",function(){return nt}),n.d(i,"Starter",function(){return lt}),n.d(i,"Furnace",function(){return dt}),n.d(i,"Transporter",function(){return _t}),n.d(i,"Seller",function(){return Jt}),n.d(i,"Crafter",function(){return It});n("cadf"),n("551c"),n("f751"),n("097d");var a=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},o=[],c=(n("5c0b"),n("2877")),s={},l=Object(c["a"])(s,r,o,!1,null,null,null),u=l.exports,m=n("8c4f"),p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home p1"},[n("div",{staticClass:"p1"},[n("span",{staticClass:"text-primary"},[t._v("Ganancias ")]),n("span",{staticClass:"label"},[t._v("$"+t._s(Number(t.earnings).toFixed(2)))])]),n("div",{staticClass:"flex"},[n("ToolBox"),n("Factory",{attrs:{rows:t.rows}}),n("Details",{attrs:{currentMachine:t.currentMachine}})],1),t._m(0)])},f=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("footer",[i("p",{staticClass:"text-small subtle"},[t._v("A game developed by")]),i("img",{staticClass:"hover",attrs:{height:"200px",alt:"Buggysoft logo",src:n("b35e")}})])}],h=n("2f62"),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"details toolbar"},[n("p",{staticClass:"text-primary hp1"},[t._v("Detalles")]),t.currentMachine.name?n("div",{staticClass:"section text-small"},[n("div",{staticClass:"label"},[t._v(t._s(t.currentMachine.name))]),n("p",[t._v("Costo: "),n("span",{staticClass:"text-accent"},[t._v("$"+t._s(t.currentMachine.cost))])]),n("p",[t._v("Frecuencia: "),n("span",{staticClass:"text-accent"},[t._v(t._s(t.currentMachine.speed)+"/s")])])]):n("div",{staticClass:"section text-small"},[n("i",[t._v("Seleccione una maquina")])])])},v=[],b={name:"Details",props:{currentMachine:Object}},g=b,C=(n("fd4f"),Object(c["a"])(g,d,v,!1,null,null,null)),y=C.exports,_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Factory",{attrs:{rows:t.rows,tickDelay:t.tickDelay,running:t.running}})},O=[],j=n("cebc"),k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"grid"},t._l(t.rows,function(t,e){return n("Row",{key:e,attrs:{number:e,columns:t}})}),1)},w=[],M=(n("ac6a"),n("c5f6"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row"},t._l(t.columns,function(e,i){return n("Cell",{key:i,attrs:{position:[t.number,i]}})}),1)}),x=[],A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Cell",{attrs:{position:t.position,content:t.content,action:t.action,resourceCell:t.resourceCell,debug:t.debug},on:{applyActionToCell:t.applyActionToCell,stopAnimation:function(e){return t.stopAnimation(t.position)}}})},T=[],E=n("768b"),R=n("d225"),S=n("b0b4"),$=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(R["a"])(this,t),this.position=e,this.machine=n}return Object(S["a"])(t,[{key:"tick",value:function(t,e){this.machine.tick(t,e)}}],[{key:"getNextCell",value:function(t,e){var n={up:function(t){var e=Object(E["a"])(t,2),n=e[0],i=e[1];return[Math.max(n-1,0),i]},down:function(t){var e=Object(E["a"])(t,2),n=e[0],i=e[1];return[n+1,i]},left:function(t){var e=Object(E["a"])(t,2),n=e[0],i=e[1];return[n,Math.max(i-1,0)]},right:function(t){var e=Object(E["a"])(t,2),n=e[0],i=e[1];return[n,i+1]}};return n[e](t)}}]),t}(),B=$,q=n("db0c"),N=n.n(q),P=n("a4bb"),F=n.n(P),I=(n("7f7f"),function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;Object(R["a"])(this,t),this.name=e.name,this.icon=e.icon,this.orientation=e.orientation,this.tick=e.tick||n,this.cost=e.cost,this.speed=e.speed,this.animated=e.animated,this.position=e.position});function D(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={cost:100,speed:1,icon:"in.png",orientation:"down"};function n(t,e){if(console.log("Tick Starter"),this.material){var n=Object(E["a"])(this.position,2),i=n[0],a=n[1],r=t[i][a];if(r.resources[this.material]>0){var o=B.getNextCell(this.position,this.orientation);e.addResourcesInCell(o,[{material:this.material,quantity:1}]),e.consumeResourcesInCell(this.position,[{material:this.material,quantity:1}])}else e.addResourcesInCell(this.position,[{material:this.material,quantity:1}])}else console.log("No material selected")}var i=new I(Object(j["a"])({},e,t),n);return i.material=t.material,i}function U(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={cost:75,speed:1,icon:"seller.png",orientation:"down"};function n(){console.log("Tick Seller")}return new I(Object(j["a"])({},e,t),n)}function L(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={cost:100,speed:1,icon:"transporter.png",orientation:"down"};function n(t,e){console.log("Tick Transporter");var n=Object(E["a"])(this.position,2),i=n[0],a=n[1],r=t[i][a];if(console.log(r),!r.isEmpty()){var o=B.getNextCell(this.position,this.orientation),c=[];F()(r.resources).forEach(function(t){c.push({material:t,quantity:r.resources[t]})}),console.log(c),e.addResourcesInCell(o,c),e.consumeResourcesInCell(this.position,c)}}return new I(Object(j["a"])({},e,t),n)}function W(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={cost:200,speed:1,icon:"crafter.png",orientation:"down"};function n(){console.log("Tick Crafter")}var i=new I(Object(j["a"])({},e,t),n);return i.blueprint={},i}function G(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={cost:100,speed:1,icon:"furnace.png",orientation:"down"};function n(t,e){console.log("Tick Furnace");var n=Object(E["a"])(this.position,2),i=n[0],a=n[1],r=t[i][a];if(r.hasProcessedMaterials()){var o,c=B.getNextCell(this.position,this.orientation);N()(this.transformations).forEach(function(t){r.resources[t]>0&&(o=t)}),e.addResourcesInCell(c,[{material:o,quantity:1}]),e.consumeResourcesInCell(this.position,[{material:o,quantity:1}])}else if(r.hasRawMaterials()){var s;F()(this.transformations).forEach(function(t){r.resources[t]>0&&(s=t)}),e.addResourcesInCell(this.position,[{material:this.transformations[s],quantity:1}]),e.consumeResourcesInCell(this.position,[{material:s,quantity:1}])}else console.log("No materials to process")}var i=new I(Object(j["a"])({},e,t),n);return i.transformations={gold:"processed_gold",copper:"processed_copper",aluminum:"processed_aluminum",carbon:"processed_carbon",iron:"processed_iron"},i}var J={Starter:D,Seller:U,Transporter:L,Crafter:W,Furnace:G};function z(t){return J[t.name](t)}n("6762"),n("2fdb");var H=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{gold:0,copper:0,aluminum:0,carbon:0,iron:0};Object(R["a"])(this,t),this.position=e,this.resources=n}return Object(S["a"])(t,[{key:"addResources",value:function(e){var n=t.copyResources(this.resources);return F()(e).forEach(function(t){n[t]?n[t]+=e[t]:n[t]=e[t]}),new t(this.position,n)}},{key:"consumeResources",value:function(e){var n=t.copyResources(this.resources);return F()(e).forEach(function(t){n[t]>=e[t]?n[t]-=e[t]:console.log("Not enough ".concat(t))}),new t(this.position,n)}},{key:"copy",value:function(){var e=t.copyResources(this.resources);return new t(this.position,e)}},{key:"isEqualTo",value:function(t){return this.resources===t.resources}},{key:"hasRawMaterials",value:function(){return!(0===this.resources.gold&&0===this.resources.copper&&0===this.resources.aluminum&&0===this.resources.carbon&&0===this.resources.iron)}},{key:"hasProcessedMaterials",value:function(){var t=this;return F()(this.resources).some(function(e){return e.includes("processed_")&&t.resources[e]>0})}},{key:"isEmpty",value:function(){return!this.hasRawMaterials()&&!this.hasProcessedMaterials()}}],[{key:"copyResources",value:function(t){return Object(j["a"])({gold:t.gold,copper:t.copper,aluminum:t.aluminum,carbon:t.carbon,iron:t.iron},t)}}]),t}(),K=H,Q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"cell",on:{click:t.applyActionToCell}},[n("transition",{attrs:{name:"fade"}},[t.content.machine.name?n("div",{staticClass:"machine-container"},[n(t.content.machine.name,{tag:"component",attrs:{machine:t.content.machine,action:t.action},on:{stopAnimation:function(e){return t.$emit("stopAnimation")}}})],1):t._e()]),t.debug?n("div",{staticClass:"resource-display"},t._l(t.resourceCell.resources,function(e,i){return n("div",{key:i},[n("span",{class:["material",i],attrs:{title:i}}),t._v(" "+t._s(e)+"\n    ")])}),0):t._e()],1)},V=[],X=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("img",{class:["machine",t.orientation,t.animated?"animated":""],attrs:{src:t.iconUrl,alt:""}})},Y=[],Z={name:"Machine",props:{action:String,machine:{type:Object,default:function(){return{}}}},data:function(){return{publicPath:"/pdes-tp-buggysoft/"}},computed:{iconUrl:function(){return"".concat(this.publicPath,"machines/").concat(this.machine.icon)},orientation:function(){return this.machine.orientation},animated:function(){return this.machine.animated}},watch:{machine:function(t){var e=this;t.animated&&setTimeout(function(){e.$emit("stopAnimation")},225)}}},tt=Z,et=(n("d9a3"),Object(c["a"])(tt,X,Y,!1,null,null,null)),nt=et.exports,it=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"options-container"},[n("img",{class:["machine",t.orientation,t.animated?"animated":""],attrs:{src:t.iconUrl,alt:""},on:{click:t.toggleSelected}}),t.selected?n("div",{staticClass:"options-panel"},t._l(t.materials,function(e){var i=e.materialName,a=e.material;return n("p",{key:a,on:{click:function(e){return t.selectMaterial(a)}}},[n("span",{class:["material",i]}),t._v(" "+t._s(i)+"\n    ")])}),0):t._e()])},at=[],rt={gold:"gold",copper:"copper",aluminum:"aluminum",carbon:"carbon",iron:"iron"},ot={name:"Starter",mixins:[nt],data:function(){return{selected:!1,materials:[{materialName:"oro",material:rt.gold},{materialName:"cobre",material:rt.copper},{materialName:"aluminio",material:rt.aluminum},{materialName:"carbon",material:rt.carbon},{materialName:"hierro",material:rt.iron}]}},methods:{toggleSelected:function(){"select"===this.action&&(this.selected=!this.selected)},selectMaterial:function(t){this.selected=!1,this.machine.material=t}}},ct=ot,st=(n("80b7"),Object(c["a"])(ct,it,at,!1,null,null,null)),lt=st.exports,ut=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"options-container"},[n("img",{class:["machine",t.orientation,t.animated?"animated":""],attrs:{src:t.iconUrl,alt:""}})])},mt=[],pt={name:"Furnace",mixins:[nt]},ft=pt,ht=Object(c["a"])(ft,ut,mt,!1,null,null,null),dt=ht.exports,vt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"options-container"},[n("img",{class:["machine",t.orientation,t.animated?"animated":""],attrs:{src:t.iconUrl,alt:""}})])},bt=[],gt={name:"Transporter",mixins:[nt]},Ct=gt,yt=Object(c["a"])(Ct,vt,bt,!1,null,null,null),_t=yt.exports,Ot=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Crafter",{attrs:{action:t.action,machine:t.machine,blueprints:t.blueprints}})},jt=[],kt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"options-container"},[n("img",{class:["machine",t.orientation,t.animated?"animated":""],attrs:{src:t.iconUrl,alt:""},on:{click:t.toggleSelected}}),t.selected?n("div",{staticClass:"options-panel for-blueprint"},[n("h2",[t._v("Planos")]),t._l(t.blueprints,function(e){return n("Blueprint",{key:e.name,attrs:{blueprint:e,selected:t.machine.blueprint.name===e.name},on:{click:function(n){return t.selectBlueprint(e)}}})})],2):t._e()])},wt=[],Mt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["blueprint",t.selected?"selected":""],on:{click:function(e){return t.$emit("click")}}},[n("h4",{class:["label",t.selected?"selected":""]},[t._v(t._s(t.blueprint.name))]),t._l(t.blueprint.resources,function(e){return n("div",{key:e.material,staticClass:"resource"},[n("span",{class:["material",e.material]}),t._v(" "+t._s(e.material)+"\n    "),n("span",{staticClass:"qty"},[t._v(" x"+t._s(e.qty))])])}),n("p",{staticClass:"profit"},[t._v("\n    Ganancia "),n("span",{staticClass:"money"},[t._v("$"+t._s(Number(t.blueprint.profit).toFixed(2)))])])],2)},xt=[],At={name:"Blueprint",props:{blueprint:Object,selected:Boolean}},Tt=At,Et=(n("bb54"),Object(c["a"])(Tt,Mt,xt,!1,null,null,null)),Rt=Et.exports,St={name:"Crafter",mixins:[nt],components:{Blueprint:Rt},props:{blueprints:Array},data:function(){return{selected:!1}},methods:{toggleSelected:function(){"select"===this.action&&(this.selected=!this.selected)},selectBlueprint:function(t){this.selected=!1,this.machine.blueprint=t}}},$t=St,Bt=(n("807f"),Object(c["a"])($t,kt,wt,!1,null,null,null)),qt=Bt.exports,Nt={name:"CrafterWrapper",components:{Crafter:qt},props:{action:String,machine:Object},computed:Object(j["a"])({},Object(h["d"])(["blueprints"]))},Pt=Nt,Ft=Object(c["a"])(Pt,Ot,jt,!1,null,"0bbbcd2e",null),It=Ft.exports,Dt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"options-container"},[n("img",{class:["machine",t.orientation,t.animated?"animated":""],attrs:{src:t.iconUrl,alt:""}})])},Ut=[],Lt={name:"Seller",mixins:[nt]},Wt=Lt,Gt=Object(c["a"])(Wt,Dt,Ut,!1,null,null,null),Jt=Gt.exports,zt={name:"Cell",components:Object(j["a"])({},i),props:{content:Object,position:Array,action:String,resourceCell:Object,debug:Boolean},computed:{machineComponent:function(){return this.content.machine.name||"Machine"}},methods:{applyActionToCell:function(){this.$emit("applyActionToCell",this.position)}}},Ht=zt,Kt=(n("7ea3"),Object(c["a"])(Ht,Q,V,!1,null,null,null)),Qt=Kt.exports,Vt={name:"Cell-Wrapper",components:{Cell:Qt},props:{position:Array},computed:Object(j["a"])({},Object(h["d"])(["rows","resources","action","debug"]),{content:function(){var t=Object(E["a"])(this.position,2),e=t[0],n=t[1];return this.rows[e][n]||new B},resourceCell:function(){var t=Object(E["a"])(this.position,2),e=t[0],n=t[1];return this.resources[e][n]||new K}}),methods:Object(j["a"])({},Object(h["c"])(["setCurrentMachine","stopAnimation"]),Object(h["b"])(["applyActionToCell"]))},Xt=Vt,Yt=Object(c["a"])(Xt,A,T,!1,null,"f0404ed6",null),Zt=Yt.exports,te={name:"Row",components:{Cell:Zt},props:{number:Number,columns:Array}},ee=te,ne=(n("b2f8"),Object(c["a"])(ee,M,x,!1,null,"78977fff",null)),ie=ne.exports,ae={name:"Factory",components:{Row:ie},props:{rows:Array,rowsToCommit:Array,tickDelay:Number,running:Boolean},methods:Object(j["a"])({},Object(h["b"])(["tickCell","endTick"]),{gameLoop:function(){var t=this;console.log("Tick"),this.running&&(this.rows.forEach(function(e){e.forEach(function(e){e.machine.tick&&t.tickCell(e)})}),this.endTick()),setTimeout(this.gameLoop.bind(this),this.tickDelay)}}),mounted:function(){this.gameLoop()}},re=ae,oe=(n("3815"),Object(c["a"])(re,k,w,!1,null,"363781bb",null)),ce=oe.exports,se={name:"Factory-Wrapper",props:{rows:Array},components:{Factory:ce},computed:Object(j["a"])({},Object(h["d"])(["tickDelay","running"]))},le=se,ue=Object(c["a"])(le,_,O,!1,null,"49f7b804",null),me=ue.exports,pe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"toolbar"},[n("p",{staticClass:"text-primary hp1"},[t._v("Maquinas")]),n("div",{staticClass:"section no-padding"},t._l(t.machines,function(e){return n("Button",{key:e.name,attrs:{type:e.name===t.currentMachine.name?"active":"",disabled:e.cost>t.earnings},on:{click:function(n){return t.pickMachineToPlace(e)}}},[n("Machine",{attrs:{machine:e}})],1)}),1),n("br"),n("p",{staticClass:"text-primary hp1"},[t._v("Edición")]),n("div",{staticClass:"section no-padding"},[n("ActionButton",{attrs:{action:"remove",active:"remove"===t.action},on:{click:function(e){return t.setAction("remove")}}}),n("ActionButton",{attrs:{action:"move",active:"move"===t.action},on:{click:function(e){return t.setAction("move")}}}),n("ActionButton",{attrs:{action:"rotate",active:"rotate"===t.action},on:{click:function(e){return t.setAction("rotate")}}})],1)])},fe=[],he=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{class:[t.type,t.disabled?"disabled":"","square-button"],on:{click:t.handleClick}},[t._t("default")],2)},de=[],ve={name:"Button",props:{type:String,disabled:Boolean},methods:{handleClick:function(){this.disabled||this.$emit("click")}}},be=ve,ge=(n("ef55"),Object(c["a"])(be,he,de,!1,null,null,null)),Ce=ge.exports,ye=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Button",{attrs:{type:t.active?"active":""},on:{click:function(e){return t.$emit("click")}}},[n("img",{attrs:{src:t.publicPath+"actions/"+t.action+".png",alt:""}})])},_e=[],Oe={name:"ActionButton",components:{Button:Ce},props:{action:String,active:Boolean},data:function(){return{publicPath:"/pdes-tp-buggysoft/"}}},je=Oe,ke=Object(c["a"])(je,ye,_e,!1,null,"2082a286",null),we=ke.exports,Me={name:"ToolBox",components:{ActionButton:we,Button:Ce,Machine:nt},computed:Object(h["d"])(["currentMachine","machines","action","earnings"]),methods:Object(j["a"])({},Object(h["b"])(["setAction","pickMachineToPlace"]))},xe=Me,Ae=Object(c["a"])(xe,pe,fe,!1,null,null,null),Te=Ae.exports,Ee={name:"home",components:{Details:y,Factory:me,ToolBox:Te},computed:Object(h["d"])(["earnings","rows","machines","currentMachine"])},Re=Ee,Se=(n("21bb"),Object(c["a"])(Re,p,f,!1,null,null,null)),$e=Se.exports;a["a"].use(m["a"]);var Be=new m["a"]({routes:[{path:"/",name:"home",component:$e}]}),qe={setCurrentMachine:function(t,e){t.currentMachine=e},clearCurrentMachine:function(t){t.currentMachine={}},setCellMachine:function(t,e){var n=Object(E["a"])(e,2),i=n[0],a=n[1];if("place"===t.action){var r=z(t.currentMachine);t.rows[i][a].machine=r,r.position=e}else t.rows[i][a].machine=t.currentMachine,t.currentMachine.position=e},setActionOriginCell:function(t,e){t.actionOriginCell=e},buyMachine:function(t,e){t.earnings-=e.cost},rotateMachineInCell:function(t,e){var n=e.cell,i=e.orientation,a=Object(E["a"])(n,2),r=a[0],o=a[1],c=t.rows[r][o].machine;t.rows[r][o].machine=z(Object(j["a"])({},c,{orientation:i,animated:!0}))},stopAnimation:function(t,e){var n=Object(E["a"])(e,2),i=n[0],a=n[1],r=t.rows[i][a].machine;t.rows[i][a].machine=z(Object(j["a"])({},r,{animated:!1}))},increaseEarnings:function(t,e){t.earnings+=e},setAction:function(t,e){t.action=e},startSimulation:function(t){t.running=!0},stopSimulation:function(t){t.running=!1},stageResourceAdding:function(t,e){var n=e.cell,i=e.updateToCell,r=Object(E["a"])(n,2),o=r[0],c=r[1],s=t.resourcesToCommit[o][c],l=s.addResources(i);a["a"].set(t.resourcesToCommit[o],c,l)},stageResourceConsumption:function(t,e){var n=e.cell,i=e.updateToCell,r=Object(E["a"])(n,2),o=r[0],c=r[1],s=t.resourcesToCommit[o][c],l=s.consumeResources(i);a["a"].set(t.resourcesToCommit[o],c,l)},commitResources:function(t){t.resourcesToCommit.forEach(function(e){e.forEach(function(e){var n=Object(E["a"])(e.position,2),i=n[0],r=n[1];e.isEqualTo(t.resources[i][r])||a["a"].set(t.resources[i],r,e)})})},clearStaging:function(t){t.resources.forEach(function(e){e.forEach(function(e){var n=Object(E["a"])(e.position,2),i=n[0],r=n[1];a["a"].set(t.resourcesToCommit[i],r,e.copy())})})}},Ne=n("75fc");function Pe(t,e){return Object(Ne["a"])(Array(e).keys()).map(function(e){return new K([t,e])})}function Fe(t,e){return Object(Ne["a"])(Array(e).keys()).map(function(e){return new B([t,e])})}function Ie(t,e,n){return Object(Ne["a"])(Array(t).keys()).map(function(t){return n(t,e)})}function De(t,e){return Ie(t,e,Fe)}function Ue(t,e){return Ie(t,e,Pe)}function Le(t,e){var n=Object(E["a"])(t,2),i=n[0],a=n[1];return e.rows[i][a]}function We(t,e){return Le(t,e).machine}function Ge(t){var e={};return t.forEach(function(t){var n=t.material,i=t.quantity;void 0!==e[n]?e[n]+=i:e[n]=i}),e}function Je(t){var e=t.commit;return{addResourcesInCell:function(t,n){var i=Ge(n);e("stageResourceAdding",{cell:t,updateToCell:i})},consumeResourcesInCell:function(t,n){var i=Ge(n);e("stageResourceConsumption",{cell:t,updateToCell:i})}}}var ze=Je,He={applyActionToCell:function(t,e){var n=t.commit,i=t.state;i.cellActions[i.action]({commit:n,state:i},e)},setAction:function(t,e){var n=t.commit;n("setAction",e),n("clearCurrentMachine")},pickMachineToPlace:function(t,e){var n=t.commit;n("setCurrentMachine",z(e)),n("setAction","place")},place:function(t,e){var n=t.commit,i=t.state,a=We(e,i);a.name?(n("setCurrentMachine",a),n("setAction","select")):i.currentMachine.cost<=i.earnings&&(n("buyMachine",i.currentMachine),n("setCellMachine",e))},select:function(t,e){var n=t.commit,i=t.state,a=We(e,i);n("setCurrentMachine",a)},remove:function(t,e){var n=t.commit,i=t.state,a=We(e,i);a.name&&(n("increaseEarnings",a.cost),n("clearCurrentMachine"),n("setCellMachine",e))},move:function(t,e){var n=t.commit,i=t.state,a=We(e,i);a.name&&!i.actionOriginCell?(n("setCurrentMachine",a),n("setActionOriginCell",e)):a.name?(n("setCurrentMachine",a),n("setAction","select"),n("setActionOriginCell",null)):(n("setCellMachine",e),n("clearCurrentMachine"),n("setCellMachine",i.actionOriginCell),n("setActionOriginCell",null))},rotate:function(t,e){var n=t.commit,i=t.state,a=We(e,i);if(a.name){var r={up:"right",right:"down",down:"left",left:"up"},o=r[a.orientation];n("rotateMachineInCell",{cell:e,orientation:o})}else n("setAction","select")},tickCell:function(t,e){e.tick(t.state.resources,ze(t))},endTick:function(t){var e=t.commit;e("commitResources"),e("clearStaging")}},Ke=12,Qe=12,Ve=He.place,Xe=He.select,Ye=He.remove,Ze=He.move,tn=He.rotate,en=[z({name:"Starter"}),z({name:"Seller"}),z({name:"Crafter"}),z({name:"Transporter"}),z({name:"Furnace"})],nn=[{name:"Circuito",cost:10,profit:20,resources:[{material:rt.copper,quantity:2},{material:rt.gold,quantity:1}]},{name:"Cable de Cobre",cost:10,profit:20,resources:[{material:rt.copper,quantity:2}]},{name:"Engranaje",cost:10,profit:20,resources:[{material:rt.iron,quantity:1}]}],an={earnings:1e3,tickDelay:1e3,running:!0,currentMachine:{},action:"place",actionOriginCell:null,cellActions:{place:Ve,remove:Ye,move:Ze,rotate:tn,select:Xe},machines:en,blueprints:nn,rows:De(Ke,Qe),resources:Ue(Ke,Qe),resourcesToCommit:Ue(Ke,Qe),debug:!0},rn={namespaced:!0,actions:{addResourceToCell:function(t,e){var n=t.rootState,i=e.resource,a=e.nextCell,r=Object(E["a"])(a,2),o=r[0],c=r[1],s=n.rowsToCommit[o][c];s.machine&&s.machine.name&&s.resources.push(i)}}},on={commit:rn};a["a"].use(h["a"]);var cn=new h["a"].Store({state:an,mutations:qe,actions:He,modules:on});a["a"].config.productionTip=!1,new a["a"]({router:Be,store:cn,render:function(t){return t(u)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";var i=n("5e27"),a=n.n(i);a.a},"5e27":function(t,e,n){},"63c6":function(t,e,n){},"7ea3":function(t,e,n){"use strict";var i=n("dd95"),a=n.n(i);a.a},"7fd4":function(t,e,n){},"807f":function(t,e,n){"use strict";var i=n("ee5f"),a=n.n(i);a.a},"80b7":function(t,e,n){"use strict";var i=n("506e"),a=n.n(i);a.a},b2f8:function(t,e,n){"use strict";var i=n("109c"),a=n.n(i);a.a},b35e:function(t,e,n){t.exports=n.p+"img/buggysoft-logo-w.7be831b4.png"},bb54:function(t,e,n){"use strict";var i=n("7fd4"),a=n.n(i);a.a},bcc9:function(t,e,n){},c76d:function(t,e,n){},d9a3:function(t,e,n){"use strict";var i=n("4634"),a=n.n(i);a.a},dd95:function(t,e,n){},ee5f:function(t,e,n){},ef55:function(t,e,n){"use strict";var i=n("c76d"),a=n.n(i);a.a},fd4f:function(t,e,n){"use strict";var i=n("63c6"),a=n.n(i);a.a}});
//# sourceMappingURL=app.521b7533.js.map